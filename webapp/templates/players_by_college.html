<!DOCTYPE html>
<html>
<head>
    <title>Players by College</title>
    <link rel="stylesheet" href="{{url_for('static', filename='style.css') }}">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body style="background-color: antiquewhite;">

<h3 id="title">Players By College</h3>
<div id="container">
    <h3>Players by college</h3>
    <form action = "/players_by_college">
        <!--<p>College: <input name="college" value="{{college}}"> </p>-->
        <p>College:</p>
          <p>
            <select name = "college" id="query-selection">
            <option  selected value = "college"> {{college}} </option>
              {% for item in tCol %}
              <option  value = "{{item}}"> {{item}} </option>
              {% endfor %}
            </select>              
          </p>

        <p>Limit result: <input name="limit" value="{{limit}}"> </p>
        <p><input type="submit"></p>
    </form>
    <form action="/">
        <p><input type="submit" value="Back"></p>
    </form>
    <br>

    <h3>Table</h3>

    <table>
    <colgroup>
    <col style="width: 130px">
    <col style="width: 56px">
    <col style="width: 213px">
    <col style="width: 153px">
    </colgroup>
    <tr>
        <th class="tg-0lax">Name</th>
        <th class="tg-0pky">GP</th>
        <th class="tg-0pky">Team</th>
        <th class="tg-0pky">Season</th>
    </tr>
    {% for row in dat %}
    <tr>
        <td class="tg-0lax">{{row[0]}}</td>
        <td class="tg-0lax">{{row[1]}}</td>
        <td class="tg-0lax">{{row[3]}}</td>
        <td class="tg-0lax">{{row[2]}}</td>
    </tr>
    {% endfor %}
    </table>

    <br>
    <br>
    <h3>Chart</h3>

    <head>
        <!--Load the AJAX API-->
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">

        // Load the Visualization API and the corechart package.
        google.charts.load('current', {'packages':['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.charts.setOnLoadCallback(drawChart);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart() {

            // Create the data table.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Player');
            data.addColumn('number', 'Games Played');
            data.addRows([
            {% for row in dat %}
            ['{{row[0]}} {{row[2]}} {{row[3]}}',{{row[1]}}],
            {% endfor %}
            ]);

            // Set chart options
            var options = {'title':'{{college}} Players in the NBA',
                        'width':888,
                        'height':666,
                        chartArea: {  width: "50%", height: "70%" },
                        'colors': ['#6a2c70']
                        };

            // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }
        </script>
    </head>

    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
</div>
</html>
