<!DOCTYPE html>
<html>
    <head>
        <title>Blocks by Height</title>
        <link rel="stylesheet" href="{{url_for('static', filename='style.css') }}">
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    </head>
    <body>
        <h3 id="title">Avereage Blocks by Height</h3>

        
        <div id="container">
            
            <!-- Query Form -->
            <form action = "/Blocks_by_height">
                <p>Season: <input name="season" value="{{season}}"> </p>
                <p>Limit result: <input name="limit" value="{{limit}}"> </p>
                <p><input type="submit"></p>
            </form>
            <form action = "/">
                <p><input type ="submit" value="Back"></p>
            </form>


            <h3>Table</h3>
            <table>
                <tr>
                <th class="tg-0pky">Season</th>
                <th class="tg-0pky">Height</th>
                <th class="tg-0pky">Weight</th>
                <th class="tg-0pky">Rebounds</th>
                <th class="tg-0pky">Blocks</th>
                </tr>
                {% if queryData %}
                {% for row in queryData %}
                <tr>
                <td class="tg-0pky">{{row[0]}}</td>
                <td class="tg-0pky">{{row[1]}}</td>
                <td class="tg-0pky">{{row[2]}}</td>
                <td class="tg-0pky">{{row[3]}}</td>
                <td class="tg-0pky">{{row[4]}}</td>
            </tr>
                {% endfor %}
                {% endif %}
            </table>



            <!-- Chart data -->
            <h3>Chart</h3>
            <!--Load the AJAX API-->
            <script type="text/javascript">
                // Load the Visualization API and the corechart package.
                google.charts.load('current', { 'packages': ['corechart'] });

                // Set a callback to run when the Google Visualization API is loaded.
                google.charts.setOnLoadCallback(drawSeriesChart);

                // Callback that creates and populates a data table,
                // instantiates the pie chart, passes in the data and
                // draws it.
                function drawSeriesChart() {

                    // Create the data table.
                    var data = new google.visualization.arrayToDataTable([
                        ['Height', 'Rebounds', 'Blocks', 'Season', 'Weight'],
                        {% for row in queryData %}
                            ['{{row[1]}}', {{row[3]}}, {{row[4]}}, '{{row[0]}}', {{row[2]}}],
                        {% endfor %}
                    ]);

                // Set chart options
                var options = {
                    title: 'Average Height of Top ShotBlockers and Rebounders',
                    hAxis: {title: 'Rebounds'},
                    vAxis: {title: 'Blocks'},
                    bubble: {textStyle: {fontSize: 11}},
                    width: 1000,
                    height: 800,
                    colors: ['#6a2c70']
                };

                // Instantiate and draw our chart, passing in some options.
                var chart = new google.visualization.BubbleChart(document.getElementById('series_chart_div'));
                chart.draw(data, options);
                }
            </script>
            <div id="series_chart_div"></div>
        </div>
    </body>
</html>